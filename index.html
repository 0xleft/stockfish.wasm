<script src="stockfish.js"></script>
<script>
var listener = function (line) {
  console.log('>', line);
};
Module.addMessageListener(listener);
Module.removeMessageListener(listener);

Module.postMessage('uci');
Module.postMessage('setoption name UCI_AnalyseMode value true');
Module.postMessage('setoption name Analysis Contempt value Off');
setTimeout(function() {
  Module.postMessage('setoption name Threads value 8');
  Module.postMessage('setoption name MultiPV value 5');
  Module.postMessage('position fen rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 moves');
  Module.postMessage('go movetime 90000 depth 27');
}, 3000);
</script>
