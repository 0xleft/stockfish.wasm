<script src="stockfish.js"></script>
<script>
var listener = function (line) {
  console.log('>', line);
};
Module.addMessageListener(listener);
Module.removeMessageListener(listener);

Module.postMessage('uci');
Module.postMessage('setoption name UCI_AnalyseMode value true');
Module.postMessage('setoption name Analysis Contempt value Off');
setTimeout(function() {
  Module.postMessage('setoption name Threads value 8');
  //Module.postMessage('setoption name MultiPV value 5');
  Module.postMessage('4r1k1/r1q2ppp/ppp2n2/4P3/5Rb1/1N1BQ3/PPP3PP/R5K1 w - - 1 17');
  Module.postMessage('go depth 24');
}, 3000);
</script>
